<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browse Items - AUBazaar</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* ALL YOUR EXISTING STYLES HERE - keep them the same */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
            color: #333;
            padding-top: 80px;
        }
        :root {
            --au-red: #C41E3A;
            --au-red-dark: #9B152C;
            --au-red-light: #FF4D6D;
            --au-white: #FFFFFF;
            --au-offwhite: #F8F9FA;
            --au-gray: #6C757D;
            --au-dark: #212529;
        }
        /* Navigation styles - keep your existing */
        .navbar {
            background: var(--au-white) !important;
            padding: 1rem 0;
            box-shadow: 0 2px 20px rgba(0,0,0,0.05);
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .logo-icon {
            font-size: 2rem;
            background: var(--au-red);
            color: white;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            transform: rotate(-5deg);
            transition: transform 0.3s;
        }
        .logo-icon:hover { transform: rotate(0deg); }
        .logo-text {
            font-size: 1.8rem;
            font-weight: 800;
            letter-spacing: -0.5px;
        }
        .logo-text span:first-child { color: var(--au-dark); }
        .text-red { color: var(--au-red); }
        .nav-link {
            font-weight: 500;
            color: var(--au-dark) !important;
            margin: 0 0.5rem;
            position: relative;
            padding: 0.5rem 1rem !important;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 2px;
            background: var(--au-red);
            transition: width 0.3s;
        }
        .nav-link:hover::after { width: 70%; }
        .nav-link.active { color: var(--au-red) !important; }
        .btn-primary-custom {
            background: var(--au-red);
            color: white;
            border: none;
            padding: 0.6rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            cursor: pointer;
        }
        .btn-primary-custom:hover {
            background: var(--au-red-dark);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(196, 30, 58, 0.2);
            color: white;
        }
        .btn-outline-custom {
            background: transparent;
            color: var(--au-red);
            border: 2px solid var(--au-red);
            padding: 0.6rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            cursor: pointer;
        }
        .btn-outline-custom:hover {
            background: var(--au-red);
            color: white;
            transform: translateY(-2px);
        }
        .search-wrapper {
            position: relative;
        }
        .search-wrapper i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--au-gray);
        }
        .search-input {
            padding: 0.8rem 1rem 0.8rem 45px;
            border: 1px solid #e0e0e0;
            border-radius: 50px;
            width: 300px;
            transition: all 0.3s;
        }
        .search-input:focus {
            outline: none;
            border-color: var(--au-red);
            box-shadow: 0 0 0 3px rgba(196, 30, 58, 0.1);
            width: 350px;
        }
        .page-header {
            background: linear-gradient(135deg, var(--au-offwhite) 0%, white 100%);
            padding: 40px 0 20px;
            margin-bottom: 30px;
            border-bottom: 1px solid #eee;
        }
        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--au-dark);
        }
        .page-title span {
            color: var(--au-red);
            position: relative;
        }
        .page-title span::after {
            content: '';
            position: absolute;
            bottom: 5px;
            left: 0;
            width: 100%;
            height: 8px;
            background: rgba(196, 30, 58, 0.2);
            z-index: -1;
        }
        .breadcrumb {
            background: transparent;
            padding: 0;
        }
        .breadcrumb-item a {
            color: var(--au-gray);
            text-decoration: none;
        }
        .breadcrumb-item a:hover { color: var(--au-red); }
        .breadcrumb-item.active { color: var(--au-red); }
        .filter-card {
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.03);
            border: 1px solid #f0f0f0;
            position: sticky;
            top: 100px;
        }
        .filter-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #f0f0f0;
        }
        .filter-section {
            margin-bottom: 1.5rem;
        }
        .filter-section h6 {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--au-dark);
        }
        .category-check {
            margin-bottom: 0.5rem;
            cursor: pointer;
        }
        .category-check label {
            margin-left: 0.5rem;
            color: var(--au-gray);
            cursor: pointer;
        }
        .category-check input {
            cursor: pointer;
        }
        .price-range {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }
        .price-input {
            width: 80px;
            padding: 0.5rem;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
        }
        .condition-badge-filter {
            display: inline-block;
            padding: 0.3rem 1rem;
            border: 1px solid #e0e0e0;
            border-radius: 50px;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        .condition-badge-filter:hover {
            background: var(--au-red);
            color: white;
            border-color: var(--au-red);
        }
        .condition-badge-filter.active {
            background: var(--au-red);
            color: white;
            border-color: var(--au-red);
        }
        .products-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        .results-count {
            color: var(--au-gray);
            font-size: 0.95rem;
        }
        .sort-select {
            padding: 0.5rem 2rem 0.5rem 1rem;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            font-size: 0.95rem;
        }
        .sort-select:focus {
            outline: none;
            border-color: var(--au-red);
        }
        .product-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.03);
            transition: all 0.3s;
            border: 1px solid #f0f0f0;
            margin-bottom: 20px;
            position: relative;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 30px rgba(196, 30, 58, 0.1);
        }
        .product-image-wrapper {
            position: relative;
            overflow: hidden;
            aspect-ratio: 1/1;
            background: #f8f9fa;
        }
        .product-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        .product-card:hover .product-image {
            transform: scale(1.05);
        }
        .product-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: var(--au-red);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 2;
        }
        .product-wishlist {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 35px;
            height: 35px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 2;
            opacity: 0;
            transform: translateY(-10px);
        }
        .product-card:hover .product-wishlist {
            opacity: 1;
            transform: translateY(0);
        }
        .product-wishlist:hover {
            background: var(--au-red);
            color: white;
        }
        .product-wishlist i {
            font-size: 1rem;
        }
        .product-content {
            padding: 1.2rem;
        }
        .product-category {
            font-size: 0.8rem;
            color: var(--au-red);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
            margin-bottom: 0.3rem;
        }
        .product-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--au-dark);
            font-size: 1.1rem;
            line-height: 1.4;
        }
        .product-title a {
            color: inherit;
            text-decoration: none;
        }
        .product-title a:hover {
            color: var(--au-red);
        }
        .product-price {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--au-red);
            margin-bottom: 0.5rem;
        }
        .product-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--au-gray);
            font-size: 0.85rem;
            margin-bottom: 0.8rem;
        }
        .product-meta i {
            margin-right: 0.2rem;
        }
        .product-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        .btn-view {
            flex: 1;
            background: transparent;
            border: 1px solid var(--au-red);
            color: var(--au-red);
            padding: 0.5rem;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s;
            text-decoration: none;
            text-align: center;
            font-size: 0.9rem;
            cursor: pointer;
        }
        .btn-view:hover {
            background: var(--au-red);
            color: white;
        }
        .btn-cart {
            width: 40px;
            height: 40px;
            background: var(--au-offwhite);
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--au-gray);
            transition: all 0.3s;
            text-decoration: none;
            cursor: pointer;
        }
        .btn-cart:hover {
            background: var(--au-red);
            color: white;
            border-color: var(--au-red);
        }
        .pagination {
            margin-top: 3rem;
            justify-content: center;
        }
        .page-item .page-link {
            border: none;
            color: var(--au-gray);
            padding: 0.5rem 1rem;
            margin: 0 0.2rem;
            border-radius: 8px;
            font-weight: 500;
            text-decoration: none;
            cursor: pointer;
        }
        .page-item.active .page-link {
            background: var(--au-red);
            color: white;
        }
        .page-item .page-link:hover {
            background: var(--au-offwhite);
            color: var(--au-red);
        }
        .footer {
            background: var(--au-dark);
            color: white;
            padding: 60px 0 30px;
            margin-top: 60px;
        }
        .footer-logo {
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 1rem;
        }
        .footer-logo span { color: var(--au-red); }
        .footer-text {
            color: #999;
            line-height: 1.6;
            margin-bottom: 2rem;
        }
        .footer-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            position: relative;
            padding-bottom: 0.5rem;
        }
        .footer-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 2px;
            background: var(--au-red);
        }
        .footer-links {
            list-style: none;
            padding: 0;
        }
        .footer-links li {
            margin-bottom: 0.8rem;
        }
        .footer-links a {
            color: #999;
            text-decoration: none;
            transition: color 0.3s, padding-left 0.3s;
        }
        .footer-links a:hover {
            color: var(--au-red);
            padding-left: 5px;
        }
        .contact-info {
            color: #999;
            margin-bottom: 0.8rem;
        }
        .contact-info i {
            color: var(--au-red);
            width: 25px;
            margin-right: 10px;
        }
        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            margin-top: 30px;
            border-top: 1px solid #333;
            color: #666;
        }
        @media (max-width: 768px) {
            .search-input {
                width: 200px;
            }
            .search-input:focus {
                width: 250px;
            }
            .filter-card {
                position: static;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-university"></i>
                    </div>
                    <div class="logo-text">
                        <span>AU</span><span class="text-red">Bazaar</span>
                    </div>
                </div>
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link active" href="browse.html">Browse</a></li>
                    <li class="nav-item"><a class="nav-link" href="categories.html">Categories</a></li>
                    <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
                </ul>
                
                <div class="d-flex align-items-center gap-3">
                    <div class="search-wrapper">
                        <i class="fas fa-search"></i>
                        <input type="text" class="search-input" placeholder="Search items..." id="globalSearch">
                    </div>
                    <div class="d-flex gap-2">
                        <a href="login.html" class="btn-outline-custom">Login</a>
                        <a href="register.html" class="btn-primary-custom">Register</a>
                    </div>
                    <a href="create-listing.html" class="btn-primary-custom">
                        <i class="fas fa-plus-circle me-2"></i>Sell
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                    <li class="breadcrumb-item active">Browse Items</li>
                </ol>
            </nav>
            <h1 class="page-title">Browse <span>Items</span></h1>
            <p class="text-muted">Discover amazing items from your campus community</p>
        </div>
    </section>

    <!-- Main Content -->
    <section class="pb-5">
        <div class="container">
            <div class="row">
                <!-- Filter Sidebar -->
                <div class="col-lg-3">
                    <div class="filter-card">
                        <h5 class="filter-title">Filters</h5>
                        
                        <!-- Categories -->
                        <div class="filter-section">
                            <h6>Categories</h6>
                            <div class="category-check">
                                <input type="checkbox" id="cat1">
                                <label for="cat1">Textbooks (156)</label>
                            </div>
                            <div class="category-check">
                                <input type="checkbox" id="cat2">
                                <label for="cat2">Electronics (89)</label>
                            </div>
                            <div class="category-check">
                                <input type="checkbox" id="cat3">
                                <label for="cat3">Furniture (45)</label>
                            </div>
                            <div class="category-check">
                                <input type="checkbox" id="cat4">
                                <label for="cat4">Clothing (67)</label>
                            </div>
                            <div class="category-check">
                                <input type="checkbox" id="cat5">
                                <label for="cat5">Dorm Essentials (123)</label>
                            </div>
                        </div>

                        <!-- Price Range -->
                        <div class="filter-section">
                            <h6>Price Range</h6>
                            <div class="price-range">
                                <input type="number" class="price-input" id="minPrice" placeholder="Min" value="0">
                                <span>-</span>
                                <input type="number" class="price-input" id="maxPrice" placeholder="Max" value="1000">
                            </div>
                            <button class="btn-primary-custom w-100 mt-2" id="applyPriceBtn">Apply</button>
                        </div>

                        <!-- Condition -->
                        <div class="filter-section">
                            <h6>Condition</h6>
                            <div id="conditionFilters">
                                <span class="condition-badge-filter active" data-condition="all">All</span>
                                <span class="condition-badge-filter" data-condition="new">New</span>
                                <span class="condition-badge-filter" data-condition="like new">Like New</span>
                                <span class="condition-badge-filter" data-condition="good">Good</span>
                                <span class="condition-badge-filter" data-condition="fair">Fair</span>
                            </div>
                        </div>

                        <!-- Location -->
                        <div class="filter-section">
                            <h6>Location</h6>
                            <select class="form-select" id="locationFilter">
                                <option value="all">All Locations</option>
                                <option value="library">Library</option>
                                <option value="science">Science Building</option>
                                <option value="halls">Residence Halls</option>
                                <option value="student">Student Center</option>
                            </select>
                        </div>

                        <button class="btn-outline-custom w-100" id="clearFilters">Clear Filters</button>
                    </div>
                </div>

                <!-- Products Grid -->
                <div class="col-lg-9">
                    <!-- Products Header -->
                    <div class="products-header">
                        <span class="results-count" id="resultsCount">Showing 1-8 of 8 items</span>
                        <select class="sort-select" id="sortSelect">
                            <option value="newest">Newest First</option>
                            <option value="price-low">Price: Low to High</option>
                            <option value="price-high">Price: High to Low</option>
                            <option value="popular">Most Popular</option>
                        </select>
                    </div>

                    <!-- Product Grid -->
                    <div class="row" id="productGrid">
                        <!-- Products will be loaded here -->
                    </div>

                    <!-- Pagination -->
                    <nav>
                        <ul class="pagination" id="pagination">
                            <li class="page-item disabled" id="prevPage">
                                <a class="page-link" href="#">Previous</a>
                            </li>
                            <li class="page-item active"><a class="page-link" href="#" data-page="1">1</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-page="2">2</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-page="3">3</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-page="4">4</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-page="5">5</a></li>
                            <li class="page-item" id="nextPage">
                                <a class="page-link" href="#">Next</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <div class="footer-logo">AU<span>Bazaar</span></div>
                    <p class="footer-text">Africa University's official online marketplace for secure and convenient exchange of goods and services.</p>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h5 class="footer-title">Quick Links</h5>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="browse.html">Browse</a></li>
                        <li><a href="categories.html">Categories</a></li>
                        <li><a href="about.html">About</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <h5 class="footer-title">Policies</h5>
                    <ul class="footer-links">
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Safety Guidelines</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 mb-4">
                    <h5 class="footer-title">Contact</h5>
                    <div class="contact-info"><i class="fas fa-envelope"></i> support@aubazaar.africa.edu</div>
                    <div class="contact-info"><i class="fas fa-phone"></i> +263 123 456 789</div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 AUBazaar - Africa University. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Main JavaScript -->
    <script>
        // Sample product data
        const products = [
            { id: 1, title: 'Calculus: Early Transcendentals', category: 'Textbooks', price: 25.99, location: 'Library', views: 42, condition: 'like new', image: 'https://images.unsplash.com/photo-1541963463532-d68292c34b19?w=500' },
            { id: 2, title: 'MacBook Air 2020 - 256GB', category: 'Electronics', price: 699.99, location: 'CS Dept', views: 128, condition: 'good', image: 'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=500' },
            { id: 3, title: 'Mini Fridge - 3.2 cu. ft.', category: 'Dorm Essentials', price: 89.50, location: 'Hall A', views: 56, condition: 'good', image: 'https://images.unsplash.com/photo-1592489661722-8d3f8eeba40d?w=500' },
            { id: 4, title: 'TI-84 Plus Graphing Calculator', category: 'Electronics', price: 45.00, location: 'Math Dept', views: 31, condition: 'like new', image: 'https://images.unsplash.com/photo-1587145820266-a5951ee6f620?w=500' },
            { id: 5, title: 'LED Desk Lamp with USB', category: 'Furniture', price: 24.99, location: 'Hall B', views: 23, condition: 'new', image: 'https://images.unsplash.com/photo-1523205771623-e0faa4d2813d?w=500' },
            { id: 6, title: 'North Face Backpack', category: 'Clothing', price: 35.00, location: 'Gym', views: 47, condition: 'good', image: 'https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=500' },
            { id: 7, title: 'Dell XPS 13 Laptop', category: 'Electronics', price: 899.99, location: 'Library', views: 89, condition: 'like new', image: 'https://images.unsplash.com/photo-1531297484001-80022131f5a1?w=500' },
            { id: 8, title: 'Mountain Bike', category: 'Sports', price: 120.00, location: 'Sports Complex', views: 34, condition: 'fair', image: 'https://images.unsplash.com/photo-1631545809320-84bdfdbac2b2?w=500' }
        ];

        let currentPage = 1;
        const itemsPerPage = 6;
        let filteredProducts = [...products];
        let activeFilters = {
            categories: [],
            minPrice: 0,
            maxPrice: 1000,
            condition: 'all',
            location: 'all',
            search: ''
        };

        // ========== DISPLAY PRODUCTS ==========
        function displayProducts() {
            const grid = document.getElementById('productGrid');
            if (!grid) return;
            
            // Apply filters
            let displayProducts = products.filter(product => {
                // Category filter
                if (activeFilters.categories.length > 0 && !activeFilters.categories.includes(product.category)) {
                    return false;
                }
                
                // Price filter
                if (product.price < activeFilters.minPrice || product.price > activeFilters.maxPrice) {
                    return false;
                }
                
                // Condition filter
                if (activeFilters.condition !== 'all' && product.condition !== activeFilters.condition) {
                    return false;
                }
                
                // Location filter
                if (activeFilters.location !== 'all') {
                    const locationMap = {
                        'library': 'Library',
                        'science': 'Science Building',
                        'halls': 'Residence Halls',
                        'student': 'Student Center'
                    };
                    if (product.location !== locationMap[activeFilters.location]) {
                        return false;
                    }
                }
                
                // Search filter
                if (activeFilters.search && !product.title.toLowerCase().includes(activeFilters.search.toLowerCase())) {
                    return false;
                }
                
                return true;
            });
            
            // Sort products
            const sortValue = document.getElementById('sortSelect')?.value || 'newest';
            if (sortValue === 'price-low') {
                displayProducts.sort((a, b) => a.price - b.price);
            } else if (sortValue === 'price-high') {
                displayProducts.sort((a, b) => b.price - a.price);
            } else if (sortValue === 'popular') {
                displayProducts.sort((a, b) => b.views - a.views);
            }
            
            filteredProducts = displayProducts;
            
            // Pagination
            const start = (currentPage - 1) * itemsPerPage;
            const paginatedProducts = displayProducts.slice(start, start + itemsPerPage);
            
            // Update results count
            document.getElementById('resultsCount').textContent = 
                `Showing ${start + 1}-${Math.min(start + itemsPerPage, displayProducts.length)} of ${displayProducts.length} items`;
            
            // Generate HTML
            let html = '';
            paginatedProducts.forEach(product => {
                html += `
                    <div class="col-md-4 col-6">
                        <div class="product-card">
                            <div class="product-image-wrapper">
                                <span class="product-badge">${product.condition.charAt(0).toUpperCase() + product.condition.slice(1)}</span>
                                <div class="product-wishlist" onclick="toggleWishlist(this)">
                                    <i class="far fa-heart"></i>
                                </div>
                                <img src="${product.image}" class="product-image" alt="${product.title}">
                            </div>
                            <div class="product-content">
                                <div class="product-category">${product.category}</div>
                                <h5 class="product-title">
                                    <a href="product-detail.html?id=${product.id}">${product.title}</a>
                                </h5>
                                <div class="product-price">$${product.price.toFixed(2)}</div>
                                <div class="product-meta">
                                    <span><i class="fas fa-map-marker-alt"></i> ${product.location}</span>
                                    <span><i class="fas fa-eye"></i> ${product.views} views</span>
                                </div>
                                <div class="product-actions">
                                    <a href="product-detail.html?id=${product.id}" class="btn-view">View Details</a>
                                    <a href="contact-seller.html?item=${product.id}" class="btn-cart" title="Contact Seller">
                                        <i class="fas fa-envelope"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            grid.innerHTML = html;
            
            // Update pagination
            updatePagination(displayProducts.length);
        }

        // ========== PAGINATION ==========
        function updatePagination(totalItems) {
            const totalPages = Math.ceil(totalItems / itemsPerPage);
            const pagination = document.getElementById('pagination');
            
            if (!pagination) return;
            
            let html = `
                <li class="page-item ${currentPage === 1 ? 'disabled' : ''}" id="prevPage">
                    <a class="page-link" href="#" onclick="changePage(${currentPage - 1}); return false;">Previous</a>
                </li>
            `;
            
            for (let i = 1; i <= totalPages; i++) {
                html += `
                    <li class="page-item ${currentPage === i ? 'active' : ''}">
                        <a class="page-link" href="#" onclick="changePage(${i}); return false;">${i}</a>
                    </li>
                `;
            }
            
            html += `
                <li class="page-item ${currentPage === totalPages ? 'disabled' : ''}" id="nextPage">
                    <a class="page-link" href="#" onclick="changePage(${currentPage + 1}); return false;">Next</a>
                </li>
            `;
            
            pagination.innerHTML = html;
        }

        function changePage(page) {
            const totalPages = Math.ceil(filteredProducts.length / itemsPerPage);
            if (page < 1 || page > totalPages) return;
            currentPage = page;
            displayProducts();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ========== FILTER FUNCTIONS ==========
        
        // Category filter
        document.querySelectorAll('.category-check input').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const category = this.nextElementSibling.textContent.split(' ')[0];
                if (this.checked) {
                    activeFilters.categories.push(category);
                } else {
                    activeFilters.categories = activeFilters.categories.filter(c => c !== category);
                }
                currentPage = 1;
                displayProducts();
            });
        });

        // Price filter
        document.getElementById('applyPriceBtn').addEventListener('click', function() {
            const min = parseFloat(document.getElementById('minPrice').value) || 0;
            const max = parseFloat(document.getElementById('maxPrice').value) || 1000;
            
            if (min >= 0 && max >= min) {
                activeFilters.minPrice = min;
                activeFilters.maxPrice = max;
                currentPage = 1;
                displayProducts();
            } else {
                alert('Please enter valid price range (min <= max)');
            }
        });

        // Condition filter
        document.querySelectorAll('.condition-badge-filter').forEach(badge => {
            badge.addEventListener('click', function() {
                document.querySelectorAll('.condition-badge-filter').forEach(b => {
                    b.classList.remove('active');
                });
                this.classList.add('active');
                
                activeFilters.condition = this.dataset.condition;
                currentPage = 1;
                displayProducts();
            });
        });

        // Location filter
        document.getElementById('locationFilter').addEventListener('change', function() {
            activeFilters.location = this.value;
            currentPage = 1;
            displayProducts();
        });

        // Clear filters
        document.getElementById('clearFilters').addEventListener('click', function() {
            // Reset checkboxes
            document.querySelectorAll('.category-check input').forEach(cb => {
                cb.checked = false;
            });
            
            // Reset price inputs
            document.getElementById('minPrice').value = 0;
            document.getElementById('maxPrice').value = 1000;
            
            // Reset condition
            document.querySelectorAll('.condition-badge-filter').forEach(b => {
                b.classList.remove('active');
            });
            document.querySelector('[data-condition="all"]').classList.add('active');
            
            // Reset location
            document.getElementById('locationFilter').value = 'all';
            
            // Reset search
            document.getElementById('globalSearch').value = '';
            
            // Reset filters
            activeFilters = {
                categories: [],
                minPrice: 0,
                maxPrice: 1000,
                condition: 'all',
                location: 'all',
                search: ''
            };
            
            currentPage = 1;
            displayProducts();
        });

        // Sort
        document.getElementById('sortSelect').addEventListener('change', function() {
            displayProducts();
        });

        // Search
        document.getElementById('globalSearch').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                activeFilters.search = this.value;
                currentPage = 1;
                displayProducts();
            }
        });

        // ========== WISHLIST ==========
        window.toggleWishlist = function(element) {
            const icon = element.querySelector('i');
            if (icon.classList.contains('far')) {
                icon.classList.remove('far');
                icon.classList.add('fas', 'text-danger');
                showNotification('Added to wishlist!');
            } else {
                icon.classList.remove('fas', 'text-danger');
                icon.classList.add('far');
                showNotification('Removed from wishlist');
            }
        };

        // ========== NOTIFICATION ==========
        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--au-red);
                color: white;
                padding: 15px 25px;
                border-radius: 8px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 9999;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 2000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            displayProducts();
        });
    </script>
</body>
</html>
